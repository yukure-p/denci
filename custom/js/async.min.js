"use strict";var mediaQueryList=matchMedia("(min-width:767px)");function onMediaQueryChange(){var i=document.querySelector(".fetchForm"),t=document.getElementById("searchsubmit"),e=document.querySelectorAll(".check-box"),r=document.querySelector("body"),c=document.querySelector("header").clientHeight,a=document.getElementById("result"),s=r.classList.contains("l-top"),l=document.querySelector(".search"),d=document.getElementById("similar");e.forEach(function(e){e.addEventListener("click",function(){r.classList.add("is-load"),setTimeout(function(){t.click()},100)})}),t.addEventListener("click",function(e){var t,o;e.preventDefault(),!0===mediaQueryList.matches?!0===s?(e=a.getBoundingClientRect().top+window.pageYOffset-c-200,window.scrollTo({top:e,behavior:"smooth"})):null!==d?(t=d.getBoundingClientRect().bottom+window.pageYOffset-c+100,l.classList.remove("non-active"),window.scrollTo({top:t,behavior:"smooth"})):(t=document.getElementById("place").getBoundingClientRect().bottom+window.pageYOffset+500,l.classList.remove("non-active"),window.scrollTo({top:t,behavior:"smooth"})):!0===s?(o=a.getBoundingClientRect().top+window.pageYOffset-c-40,window.scrollTo({top:o,behavior:"smooth"})):null!==d?(o=d.getBoundingClientRect().bottom+window.pageYOffset-c+100,l.classList.remove("non-active"),window.scrollTo({top:o,behavior:"smooth"})):(n=document.getElementById("place").getBoundingClientRect().bottom+window.pageYOffset+500,l.classList.remove("non-active"),window.scrollTo({top:n,behavior:"smooth"}));var n=new FormData(i);n.append("action","ajax_func"),fetch("async.url",{method:"POST",body:n}).then(function(e){return e.text()}).then(function(e){var t=(new DOMParser).parseFromString(e,"text/html"),e=t.querySelector(".number").textContent;document.querySelector(".num").textContent=e;e=t.querySelector("body").innerHTML,t=document.createElement("div");t.innerHTML=e,document.getElementById("result").innerHTML=t.innerHTML,r.classList.remove("is-load");var t=document.querySelectorAll(".l-box,.lazyload"),o=new IntersectionObserver(function(e){e.forEach(function(e){var t;e.isIntersecting&&((t=e.target).src=t.dataset.src,t.addEventListener("load",function(){t.classList.add("is-delay-load")}),e.target.classList.add("is-l-box"),(e=e.target).src=e.dataset.src)})},{root:null,rootMargin:"0px 0px -200px 0px",threshold:0});Array.from(t).forEach(function(e){o.observe(e)})}).catch(function(e){console.log(e)})})}mediaQueryList.addListener(onMediaQueryChange),onMediaQueryChange(mediaQueryList);